!function(t){var i=t.Fulcrum={},r=ko.toJSON,n={isArray:Array.isArray,initArray:function(t){return ko.observableArray(t)},initVar:function(t){return ko.observable(t)}};i.sync=function(){},i.Model=function(t,i){var r=this.defaults||{},n=t||{};i||(i={}),this.attributes={},_.extend(this.attributes,r,n),this.toKO(),this.initialize.apply(this,arguments)},_.extend(i.Model.prototype,{idAttribute:"id",changed:{},initialize:function(){},toJS:function(){var t={};for(var i in this.attributes)t[i]=this.get(i);return t},toJSON:function(){return r(this.attributes)},toKO:function(t,i){var r;t?(r={})[t]=i:r=this.attributes;for(var s in r)i=r[s],this.attributes[s]=n.isArray(i)?n.initArray(i):n.initVar(i),this.subscribe(s)},subscribe:function(t){this.attributes[t].subscribe(function(i){this.changed[t]=i},this)},sync:function(){return i.sync.apply(this,arguments)},save:function(t){var i=this.isNew()?"POST":"PUT";return this.sync(i,t,this)},fetch:function(t){return this.sync("GET",t,this)},destroy:function(t){return this.sync("DELETE",t,this)},parse:function(t){return t},clone:function(){return new this.constructor(this.toJSON(this.attributes))},get:function(t){return ko.utils.unwrapObservable(this.attributes[t])},set:function(t,i,r){var n,s,e,u,o,a;if(null==t)return this;"object"==typeof t?(s=t,r=i):(s={})[t]=i,r||(r={}),a=r.unset,o=r.silent,e=this._previousAttributes=this.toJS(),u=this.attributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(n in s)i=s[n],ko.utils.unwrapObservable(u[n])!=i&&(this.changed[n]=i),a?delete u[n]:this.setAttr(n,i);return this},setAttr:function(t,i){var r=this.attributes[t];t in this.attributes?ko.isObservable(r)?r(i):this.attributes[t]=i:this.toKO(t,i)},previousAttributes:function(){return this._previousAttributes},has:function(t){return null!=this.get(t)},isNew:function(){return!this.has(this.idAttribute)},hasChanged:function(t){return t?this.changed.hasOwnProperty(t):!_.isEmpty(this.changed)}});var s=function(t,i){var r,n=this;r=t&&_.has(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)},_.extend(r,n,i);var s=function(){this.constructor=r};return s.prototype=n.prototype,r.prototype=new s,t&&_.extend(r.prototype,t),r.__super__=n.prototype,r};return i.Model.extend=s,i}(window);